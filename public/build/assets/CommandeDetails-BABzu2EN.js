import{j as e,r as h,V as j}from"./app-CfxwoAt8.js";import y from"./PanierTable-7R9cKcz-.js";import{A as u}from"./index-DfiY5tnm.js";import{m as c}from"./proxy-Cyvb93Al.js";import{generateCommandePDF as p}from"./pdfUtils-SjjL8vtA.js";import"./pdfmake-CI9llB55.js";const f=({isOpen:t,onClose:s,children:r})=>e.jsx(u,{children:t&&e.jsxs(h.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:s}),e.jsx(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeInOut"},className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsx("div",{className:"w-full max-w-4xl bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-xl",children:r})})]})}),T=({commande:t,panierCommandes:s,isOpen:r,onClose:n})=>{const m=j().props.auth.user,l=a=>s.filter(i=>i.commande_id===a).reduce((i,x)=>{var o;return i+(((o=x.panier)==null?void 0:o.price)||0)*x.quantity},0),d=l(t.id).toFixed(2),g=()=>{p(t,s,l)};return e.jsx(f,{isOpen:r,onClose:n,children:e.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[550px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Bon de Commande"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Commande N°",t.id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.created_at).toLocaleDateString("fr-FR")]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Statut:"})," ",t.status]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Informations du Client"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-96",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Nom:"})," ",t.user.name]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Email:"})," ",t.user.email]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Date de Commande:"})," ",new Date(t.created_at).toLocaleDateString("fr-FR")]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Date Prévue:"})," ",t.date]})]})]})]}),t.description&&e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:" Observation : "})," ",t.description]})}),e.jsx(y,{panierCommandes:s.filter(a=>a.commande_id===t.id)}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Sous-Total:"})," ",d," DT"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"TVA (0%):"})," 0.00 DT"]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx("strong",{children:"Total:"})," ",d," DT"]})]})}),m.role==="admin"&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:g,className:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:"Télécharger la Commande (PDF)"})})]})})};export{T as default};
