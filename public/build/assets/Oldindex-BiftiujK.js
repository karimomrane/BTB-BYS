import{V as w,r as c,j as e,M as D,U as j,R as S}from"./app-DLp2baTw.js";import{A,N as k}from"./AuthenticatedLayout-C8PA60pM.js";import{k as C,D as T}from"./index-Ds7Afd4s.js";import{A as N}from"./index-C3r2XnXx.js";import{m as E}from"./proxy-CgNG2EOp.js";import"./pdfmake-BosuxZz1.js";import"./transition-B4XE1bDt.js";import"./index-CSPPlSGh.js";import"./iconBase-CI9ss45l.js";const P={Commandé:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200","En cours de préparation":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",Préparé:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200","En cours de livraison":"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200",Livré:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Payé:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",Annulé:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},b=["ID","Date Prévu","Status","Créé par","Créé le","Action"],Q=({commandes:g,panierCommandes:o,status:n})=>{const p=w().props.auth.user,[s,m]=c.useState(null),[r,y]=c.useState(null);c.useEffect(()=>{n&&C.success(n)},[n]);const f=t=>{(s==null?void 0:s.id)===t.id?m(null):m(t)},v=t=>{(r==null?void 0:r.id)===t.id?y(null):y(t)},h=t=>o.filter(i=>i.commande_id===t).reduce((i,d)=>{var x;return i+(((x=d.panier)==null?void 0:x.price)||0)*d.quantity},0);return e.jsxs(A,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx(k,{href:route("commandes.create"),active:route().current("commandes.create"),className:"px-4 py-2 rounded border-b-2 border-indigo-600",children:"Nouvelle Commande"}),p.role==="admin"&&e.jsx(k,{href:route("panier_commandes.create"),active:route().current("panier_commandes.create"),className:"px-4 py-2 ml-4 rounded border-b-2 border-indigo-600",children:"Ajouter Panier Commande"})]}),children:[e.jsx(D,{title:"Liste des commandes"}),e.jsx(T,{}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsx("tr",{children:b.map(t=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:t},t))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:g.map(t=>e.jsxs(N,{children:[e.jsxs("tr",{onClick:()=>f(t),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P[t.status]}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t.user.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:new Date(t.created_at).toLocaleDateString("fr-FR")}),p.role==="admin"&&e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap flex gap-4",children:[e.jsx(j,{href:route("commandes.edit",t.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-500 dark:hover:text-blue-400 transition",children:"Editer"}),e.jsx(j,{href:route("commandes.destroy",t.id),method:"delete",as:"button",type:"button",className:"text-red-600 hover:text-red-900 dark:text-red-500 dark:hover:text-red-400 transition",children:"Supprimer"})]})]}),e.jsx(N,{children:(s==null?void 0:s.id)===t.id&&e.jsx(E.tr,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"bg-gray-50 dark:bg-gray-700",children:e.jsx("td",{colSpan:b.length,className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Bon de Commande"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Commande N°",t.id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.created_at).toLocaleDateString("fr-FR")]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Statut:"})," ",t.status]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Informations du Client"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-96",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Nom:"})," ",t.user.name]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Email:"})," ",t.user.email]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Date de Commande:"})," ",new Date(t.created_at).toLocaleDateString("fr-FR")]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Date Prévue:"})," ",t.date]})]})]})]}),t.description&&e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:" Observation : "})," ",t.description]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Détails de la Commande"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Produit"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Quantité"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Prix Unitaire"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:o.filter(a=>a.commande_id===t.id).map(a=>{var i,d,x,u;return e.jsxs(S.Fragment,{children:[e.jsxs("tr",{onClick:()=>v(a.panier),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((i=a.panier)==null?void 0:i.name)||"N/A"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:a.quantity}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:[(((d=a.panier)==null?void 0:d.price)||0).toFixed(2)," DT"]}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:[((((x=a.panier)==null?void 0:x.price)||0)*a.quantity).toFixed(2)," DT"]})]}),(r==null?void 0:r.id)===((u=a.panier)==null?void 0:u.id)&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-2",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Article"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Quantité"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Ready"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Extra"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:r.articles.map(l=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:l.name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:l.pivot.quantity}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:l.pivot.ready?"Oui":"Non"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:l.pivot.extra?"Oui":"Non"})]},l.id))})]})})})]},a.id)})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-1/3",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sous-Total:"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:[h(t.id).toFixed(2)," DT"]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Taxes (0%):"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:"0.00 DT"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Total:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[h(t.id).toFixed(2)," DT"]})]})]})}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Merci pour votre confiance !"}),e.jsx("p",{children:"Pour toute question, contactez-nous à support@example.com."})]})]})})})})]},t.id))})]})}),g.length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"Aucune commande disponible."})]})})})})]})};export{Q as default};
