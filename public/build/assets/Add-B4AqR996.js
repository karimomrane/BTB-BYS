import{r as a,j as e,a as q,M as D}from"./app-DPA6aB19.js";import{A as S}from"./AuthenticatedLayout-Qp-DNy9V.js";import{D as A,k as L}from"./index-CweuBl3b.js";import{M as z,u as E,P as I,a as $,L as H,m as x}from"./proxy-DLZdRkDB.js";import"./transition-DdpLegYv.js";class O extends a.Component{getSnapshotBeforeUpdate(d){const t=this.props.childRef.current;if(t&&d.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:r,isPresent:d}){const t=a.useId(),s=a.useRef(null),g=a.useRef({width:0,height:0,top:0,left:0}),{nonce:m}=a.useContext(z);return a.useInsertionEffect(()=>{const{width:h,height:n,top:u,left:i}=g.current;if(d||!s.current||!h||!n)return;s.current.dataset.motionPopId=t;const l=document.createElement("style");return m&&(l.nonce=m),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${n}px !important;
            top: ${u}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[d]),e.jsx(O,{isPresent:d,childRef:s,sizeRef:g,children:a.cloneElement(r,{ref:s})})}const B=({children:r,initial:d,isPresent:t,onExitComplete:s,custom:g,presenceAffectsLayout:m,mode:h})=>{const n=E(F),u=a.useId(),i=a.useCallback(c=>{n.set(c,!0);for(const b of n.values())if(!b)return;s&&s()},[n,s]),l=a.useMemo(()=>({id:u,initial:d,isPresent:t,custom:g,onExitComplete:i,register:c=>(n.set(c,!1),()=>n.delete(c))}),m?[Math.random(),i]:[t,i]);return a.useMemo(()=>{n.forEach((c,b)=>n.set(b,!1))},[t]),a.useEffect(()=>{!t&&!n.size&&s&&s()},[t]),h==="popLayout"&&(r=e.jsx(T,{isPresent:t,children:r})),e.jsx(I.Provider,{value:l,children:r})};function F(){return new Map}const j=r=>r.key||"";function P(r){const d=[];return a.Children.forEach(r,t=>{a.isValidElement(t)&&d.push(t)}),d}const K=({children:r,exitBeforeEnter:d,custom:t,initial:s=!0,onExitComplete:g,presenceAffectsLayout:m=!0,mode:h="sync"})=>{const n=a.useMemo(()=>P(r),[r]),u=n.map(j),i=a.useRef(!0),l=a.useRef(n),c=E(()=>new Map),[b,M]=a.useState(n),[f,w]=a.useState(n);$(()=>{i.current=!1,l.current=n;for(let p=0;p<f.length;p++){const o=j(f[p]);u.includes(o)?c.delete(o):c.get(o)!==!0&&c.set(o,!1)}},[f,u.length,u.join("-")]);const k=[];if(n!==b){let p=[...n];for(let o=0;o<f.length;o++){const y=f[o],C=j(y);u.includes(C)||(p.splice(o,0,y),k.push(y))}h==="wait"&&k.length&&(p=k),w(P(p)),M(n);return}const{forceRender:v}=a.useContext(H);return e.jsx(e.Fragment,{children:f.map(p=>{const o=j(p),y=n===f||u.includes(o),C=()=>{if(c.has(o))c.set(o,!0);else return;let N=!0;c.forEach(R=>{R||(N=!1)}),N&&(v==null||v(),w(l.current),g&&g())};return e.jsx(B,{isPresent:y,initial:!i.current||s?void 0:!1,custom:y?void 0:t,presenceAffectsLayout:m,mode:h,onExitComplete:y?void 0:C,children:p},o)})})},J=()=>{const[r,d]=a.useState(!1),{data:t,setData:s,post:g,errors:m,processing:h}=q({nbpanier:"",date:"",description:""}),n=[{name:"Dattes",quantity:3},{name:"Farine",quantity:2},{name:"Lait en poudre",quantity:1},{name:"Sucre",quantity:2},{name:"Chorba Épices",quantity:1},{name:"Pois chiches",quantity:1},{name:"Miel",quantity:1},{name:"Thé vert",quantity:2},{name:"Semoule",quantity:2},{name:"Olives",quantity:1}],u=i=>{i.preventDefault(),g(route("commandes.store"),{onSuccess:()=>{L("Here is your toast.")}})};return e.jsxs(S,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Ajouter une commande"}),children:[e.jsx(D,{title:"Ajouter une commande"}),e.jsx(A,{position:"bottom-center",reverseOrder:!1}),e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"py-5",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx(x.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"flex flex-col items-center mb-8 lg:mb-0 bg-cover bg-center p-6 rounded-lg",style:{backgroundImage:"url(/CMD.jpg)"},children:e.jsxs("div",{className:"bg-black bg-opacity-40 p-4 rounded-lg w-full",children:[e.jsxs("button",{onClick:()=>d(i=>!i),className:"w-full text-left bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-between",children:[e.jsx("span",{children:"Produits dans le Panier"}),e.jsx(x.span,{initial:{rotate:0},animate:{rotate:r?180:0},transition:{duration:.3},className:"ml-2 transform",children:"▼"})]}),e.jsx(K,{children:r&&e.jsx(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.length>0?n.map((i,l)=>e.jsxs(x.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:l*.2},className:"text-sm flex flex-col text-center items-center justify-between p-2 bg-white rounded-lg shadow-sm hover:bg-indigo-50 dark:bg-gray-800 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:i.name||"Produit inconnu"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i.quantity," unité",i.quantity>1?"s":""]})]},l)):e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"col-span-full text-center text-gray-500 dark:text-gray-400",children:"Aucun produit dans le panier."})})})]})}),e.jsx(x.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},transition:{duration:.5,delay:1},className:"lg:flex-1",children:e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Nombre de paniers"}),e.jsx("input",{type:"number",value:t.nbpanier,onChange:i=>s("nbpanier",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"}),e.jsx("span",{className:"text-red-500 text-xs",children:m.nbpanier})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Date Prévu"}),e.jsx("input",{type:"date",value:t.date,onChange:i=>s("date",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"}),e.jsx("span",{className:"text-red-500 text-xs",children:m.date})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Description (optionnel)"}),e.jsx("textarea",{value:t.description,onChange:i=>s("description",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"}),e.jsx("span",{className:"text-red-500 text-xs",children:m.description})]}),e.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:h,className:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:"Ajouter"})]})})]})})})})})]})};export{J as default};
