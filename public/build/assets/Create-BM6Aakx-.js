import{a as k,r as N,j as e,M as v,U as w}from"./app-CfxwoAt8.js";import{A}from"./AuthenticatedLayout-GCU5Ylj5.js";import{D as E,c as m}from"./index-CiZk0RZ0.js";import{I as x}from"./InputError-JwcQvZ1_.js";import"./pdfmake-CI9llB55.js";import"./transition-o3MW2CAL.js";import"./proxy-Cyvb93Al.js";import"./index-B1fRAH6A.js";const I=({articles:u,paniers:p})=>{const{data:s,setData:o,post:h,processing:l,errors:g,reset:y}=k({panier_id:"",articles:[]}),b=(r,d)=>{d?o("articles",[...s.articles,{id:r,ready:!1,extra:!1,quantity:1}]):o("articles",s.articles.filter(t=>t.id!==r))},f=(r,d)=>{const t=s.articles.map(i=>i.id===r?{...i,quantity:parseInt(d,10)}:i);o("articles",t)},j=r=>{r.preventDefault();const d=new FormData;d.append("panier_id",s.panier_id),s.articles.forEach((t,i)=>{d.append(`articles[${i}][id]`,t.id),d.append(`articles[${i}][ready]`,t.ready),d.append(`articles[${i}][extra]`,t.extra),d.append(`articles[${i}][quantity]`,t.quantity)});for(let[t,i]of d.entries())console.log(t,i);h(route("article_paniers.store"),d,{onSuccess:()=>{m.success("Articles ajoutés au panier avec succès!"),y()},onError:t=>{console.error("Validation Errors:",t),m.error("Une erreur s'est produite lors de la validation.")}})};return N.useEffect(()=>{console.log("Form Data:",s)},[s]),e.jsxs(A,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Ajouter des articles au panier"}),children:[e.jsx(v,{title:"Ajouter des articles au panier"}),e.jsx(E,{}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Panier"}),e.jsxs("select",{value:s.panier_id,onChange:r=>o("panier_id",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Sélectionner un panier"}),p.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx(x,{message:g.panier_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Articles"}),e.jsx("div",{className:"mt-1 space-y-2",children:u.map(r=>{var d,t,i;return e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"checkbox",checked:s.articles.some(a=>a.id===r.id),onChange:a=>b(r.id,a.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:r.name}),e.jsx("input",{type:"number",min:"1",value:((d=s.articles.find(a=>a.id===r.id))==null?void 0:d.quantity)||1,onChange:a=>f(r.id,a.target.value),className:"w-16 rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),s.articles.some(a=>a.id===r.id)&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((t=s.articles.find(a=>a.id===r.id))==null?void 0:t.ready)||!1,onChange:a=>{const c=s.articles.map(n=>n.id===r.id?{...n,ready:a.target.checked}:n);o("articles",c)},className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Prêt"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((i=s.articles.find(a=>a.id===r.id))==null?void 0:i.extra)||!1,onChange:a=>{const c=s.articles.map(n=>n.id===r.id?{...n,extra:a.target.checked}:n);o("articles",c)},className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Extra"})]})]})]},r.id)})}),e.jsx(x,{message:g.articles,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(w,{href:route("paniers.index"),className:"px-4 py-2 mr-2 text-sm font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200 dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:l?"Enregistrement...":"Enregistrer"})]})]})})})})})]})};export{I as default};
